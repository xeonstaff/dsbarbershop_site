---
import { Text, ButtonLink } from "../../common";
import LogoWNav from "../Logo_with_nav/LogoWNav.astro"
import { getImage , } from "astro:assets";
import myBackground from "../hero_section/heroImage.png";

const {activePage} = Astro.props
const optimizedBackground = await getImage({
  src: myBackground,
  width: 1440,
  height: 688,
  format: "webp",
});
---

<div class="hero_container">
  <LogoWNav activePage={activePage}/>

  <div class="hero_layout">
    <img src={optimizedBackground.src} class="hero_image">
    <div class="hero_textBox">
      <div class="hero_main">
        <Text class="heroTitle" tag="h2"> Dayton's Premiere Barbershop </Text>
      </div>
      <Text class="heroSubTitle" tag="h2">"It's a Guy Thing"</Text>
      <ButtonLink class="hero_button" linkPath="#findYourShop">Find Your Shop</ButtonLink>
    </div>
  </div>
</div>

<style>

  .hero_container {
    container-type: inline-size;
    width: 100%;
  }
  .hero_layout {
    display: grid;
    height: 100%;
    & > * {
      grid-column: 1;
      grid-row: 1;
    }
  }
  .hero_textBox {
    --commonformat_fontColor: var(--main_white);
    --commonformat_textAlign: center;
    --button_link_width: 290px;
    display: flex;
    flex-direction: column;
    height: 45%;
    margin-top: 10%;
    justify-content: space-evenly;
    align-items: center;
    font-size: 26px;
    max-width: 100vw;
    h2 {
        -webkit-text-stroke: 1px rgba(0, 0, 0, 1);
      }
  }

  .heroSubTitle{
    margin-bottom: 8px;
  }
  .hero_main{
    width: 80% ;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeOutOverlay {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  .hero_image {
    grid-area: heroImage;
    background-repeat: no-repeat;
    object-fit:  cover;
    aspect-ratio: 2 / 1;
    opacity: 0; 
    animation: fadeIn 1.5s ease-in forwards; 
    z-index: -2; /* keep image below text */
    width: 100%;
  }


  .hero_image::before {
    height: 48vh;
    z-index: 20;
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;    
    background-color: black;
    opacity: 1;
    animation: fadeOutOverlay 1.5s ease-in forwards;
  }

  @container (min-width: 1040px) {
    .heroTitle{
      font-size: 90px;
    }
    .heroSubTitle{
      font-size: 40px;
   }

  }

  @container (max-width: 1040px) {
    .heroTitle{
      font-size: 8vw;
    }
    .heroSubTitle{
      font-size: 5vw;
    }
  }
  
  @container (max-width: 820px) {
    .hero_image {
      min-height: 400px;
      background-size: contain;
    }
    .hero_textBox {
      font-size: 3vw;
      height: 60%;
      width: 100vw;
      margin-top: 15%;
      --button_link_width: 200px;
      h2 {
        text-align: center;
      }
    }
    .heroTitle {
      max-width: 400px;
      font-size: 40px;
    }
    .heroSubTitle{
      font-size: 4vw;
    }
    .hero_main {
      width: 90%;
      display: flex;
      justify-content: center;
    }
  }

  @container (max-width: 500px) {
    .hero_main{
      display: block;
    }
    .hero_image {
      min-height: 400px;
      background-size: contain;
      max-height: 60vh;
    }
    .hero_layout {
      height: 100%;
    }
    .hero_textBox {
      display: flex;
      text-align: center;
      flex-direction: column;
      height: 40%;
      margin-top: 30%;
      margin-bottom: 15%;
      font-size: 12px;
    }
    .hero_textBox p{
      margin-top: 10px;
      margin-bottom: 10px;
    }

  }

  @container (max-width: 480px) {

    .hero_container {
      height: 400px;
    }
    .hero_button{
      margin-bottom: 0px;
      max-width: 40vw;
      height: 4vw;
      font-size: 12px;
    }
  }

@container (max-width: 400px) {
    .hero_textBox{
      margin-top: 40%;
    }
    .hero_main > h2{
      font-size: 35px;
    }
  }
</style>
