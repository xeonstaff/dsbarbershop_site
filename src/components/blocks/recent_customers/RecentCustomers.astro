---
const defaultImages = [
  { src: './assets/client_1.png', alt: 'client haircut' },
  { src: './assets/client_2.png', alt: 'client haircut' },
  { src: './assets/client_3.png', alt: 'client haircut' },
  { src: './assets/client_4.png', alt: 'client haircut' },
  { src: './assets/client_5.png', alt: 'client haircut' },
  { src: './assets/client_6.png', alt: 'client haircut' },
  { src: './assets/client_7.png', alt: 'client haircut' },
  { src: './assets/client_8.png', alt: 'client haircut' }
];
---

<style>
  body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  .carousel-container {
    margin-top: 1vh;
    position: relative;
    align-content: center;
    overflow: hidden;
    width: 100vw;
    height: 250px;
    background-color: #F8F5EF;
  }

  .carousel-track {
    display: flex;
    gap: 30px;
    will-change: transform;
    transition: transform 0.3s linear;
  }

  .carousel-item {
    flex: 0 0 auto;
    width: 180px;
    height: 180px;
    background-color: #f4f4f4;
    border-radius: 50%;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2), 
                0px 6px 20px rgba(0, 0, 0, 0.1);
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.15));
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.3s ease-in-out;
  }

  .carousel-item img {
    border-radius: 50%;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .carousel-item:hover {
    transform: scale(1.15);
    filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.3));
  }

  @media (max-width: 600px) {
    .carousel-item {
      width: 120px;
      height: 120px;
    }
    .carousel-container {
      height: 140px;
    }
  }
</style>

<div class="carousel-container">
  <div class="carousel-track" id="carouselTrack">
    {defaultImages.concat(defaultImages).map((image, index) => (
      <div class="carousel-item" key={index}>
        <img src={image.src} alt={image.alt} />
      </div>
    ))}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const track = document.getElementById('carouselTrack');
    if (!track) {
      console.error("Element with id 'carouselTrack' not found.");
      return;
    }

    let scrollPosition = 0;
    const scrollSpeed = 1; // Adjust the scrolling speed

    const duplicateContent = () => {
      track.innerHTML += track.innerHTML;
    };

    const autoScroll = () => {
      scrollPosition += scrollSpeed;
      track.style.transform = `translateX(-${scrollPosition}px)`;

      if (scrollPosition >= track.scrollWidth / 2) {
        scrollPosition = 0;
      }

      requestAnimationFrame(autoScroll);
    };

    duplicateContent();
    autoScroll();
  });
</script>
